{"version":3,"file":"main.js","mappings":";;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;ACAkC;AACJ;AACF;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,8CAAQ;AAChC,qBAAqB,2CAAK;AAC1B,sBAAsB,4CAAM;AAC5B;AACA;AACA;AACA;AACA,iEAAe,IAAI,EAAC;;;;;;;;;;;;;;;ACpBpB,iEAAe;AACf,aAAa;AACb,CAAC,EAAC;;;;;;;;;;;;;;;ACFF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,QAAQ;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD,iEAAe,OAAO,EAAC;;;;;;;;;;;;;;;;ACxFO;AAC9B;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,KAAK;AAChB;AACA;AACA;AACA,0BAA0B,aAAa;AACvC,CAAC;AACD;AACA;AACA,kBAAkB,QAAQ;AAC1B,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,gDAAM;AACpC;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,WAAW,aAAa,sCAAsC,GAAG,IAAI,iBAAiB,IAAI,UAAU;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yFAAyF,eAAe,UAAU,KAAK;AACvH;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iEAAe,OAAO,EAAC;;;;;;;;;;;;;;;ACnGvB;AACA,iEAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,kBAAkB;AAClB;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;UClBF;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;ACN2B;AACA;AAC3B,qCAAqC,0CAAK;AAC1C;AACA;AACA;AACgC;AAChC;AACA;AACA,gCAAgC,8CAAM;AACtC;AACA;AACA;AACA;AACA;AACA,wCAAwC,8CAAM;AAC9C;AACA,KAAK;AACL","sources":["webpack://desktop-for-you/./scss/main.scss?3365","webpack://desktop-for-you/./ts/core/index.ts","webpack://desktop-for-you/./ts/core/plane.ts","webpack://desktop-for-you/./ts/core/popups.ts","webpack://desktop-for-you/./ts/core/settings.ts","webpack://desktop-for-you/./ts/settings.ts","webpack://desktop-for-you/webpack/bootstrap","webpack://desktop-for-you/webpack/runtime/define property getters","webpack://desktop-for-you/webpack/runtime/hasOwnProperty shorthand","webpack://desktop-for-you/webpack/runtime/make namespace object","webpack://desktop-for-you/./ts/main.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","import settings from './settings';\r\nimport popups from './popups';\r\nimport plane from './plane';\r\nconst core = class {\r\n    constructor() {\r\n        this.about = function () {\r\n            console.groupCollapsed('|Desktop For You|');\r\n            console.log(\"|Name|精緻桌布\");\r\n            console.log(\"|Author|xiao_e_yun\");\r\n            console.log(\"|License|BSD-3-Clause\");\r\n            console.log(\"|Repository|https://github.com/xiao-e-yun/desktop-for-you\");\r\n            console.groupEnd();\r\n        };\r\n        this.settings = settings;\r\n        this.plane = plane;\r\n        this.popups = popups;\r\n        //初始化\r\n        this.popups.init();\r\n    }\r\n};\r\nexport default core;\r\n","export default {\r\n    core() { console.log(this); }\r\n};\r\n","const $export = Object.assign(function (id, show, content, have_header, done_callback) {\r\n    const $this = $export;\r\n    const data = $this._data;\r\n    //創建新的popup\r\n    if (!(id in data)) {\r\n        $this._new_popup(id, content, have_header, done_callback);\r\n    }\r\n    //設置popup的content\r\n    else if (data[id].content !== content) {\r\n        data[id].content = content;\r\n        data[id].element.innerHTML = content;\r\n    }\r\n    //設置popup的display\r\n    if (data[id].display !== show) {\r\n        data[id].display = show;\r\n        data[id].element.classList[show ? \"add\" : \"remove\"](\"show\");\r\n    }\r\n    return data[id].element;\r\n}, {\r\n    _new_popup(id, content, have_header, done_callback) {\r\n        if (!content) {\r\n            return console.error(\"新建的彈出視窗沒有content\");\r\n        }\r\n        const data = $export._data;\r\n        const popup = document.createElement('div');\r\n        popup.id = \"popup-\" + id;\r\n        let html = \"\";\r\n        if (have_header) {\r\n            html += `<header class=\"drag-bar\"></header>`;\r\n        }\r\n        else {\r\n            popup.classList.add(\"no-header\");\r\n        }\r\n        html += `<main>${content}</main>`;\r\n        debugger;\r\n        popup.innerHTML = html;\r\n        document.getElementById(\"popups\").appendChild(popup);\r\n        data[id] = {\r\n            content: content,\r\n            display: false,\r\n            element: popup\r\n        };\r\n        const pos = popup.getBoundingClientRect();\r\n        const style = popup.style;\r\n        const screen_width = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\r\n        const screen_height = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\r\n        style.top = (screen_height - pos.height) / 2 + \"px\";\r\n        style.left = (screen_width - pos.width) / 2 + \"px\";\r\n        if (done_callback) {\r\n            done_callback(popup);\r\n        }\r\n    },\r\n    init() {\r\n        //可拖動的彈出視窗\r\n        const popups = document.getElementById(\"popups\");\r\n        popups.addEventListener(\"mousedown\", mousedown, false);\r\n        popups.addEventListener(\"mouseup\", mouseup, false);\r\n        let dragging = false;\r\n        let targeter_parent;\r\n        let x;\r\n        let y;\r\n        function mousedown(e) {\r\n            const $targeter = e.target;\r\n            if ($targeter.classList.contains(\"drag-bar\")) {\r\n                const targeter = e.target;\r\n                targeter_parent = targeter.parentElement;\r\n                dragging = true;\r\n                x = (e.clientX - targeter_parent.offsetLeft);\r\n                y = (e.clientY - targeter_parent.offsetTop);\r\n                targeter_parent.classList.add(\"dragging\");\r\n                popups.addEventListener(\"mousemove\", drag, false);\r\n            }\r\n        }\r\n        function mouseup(e) {\r\n            if (dragging) {\r\n                dragging = false;\r\n                targeter_parent.classList.remove(\"dragging\");\r\n                popups.removeEventListener(\"mousemove\", drag);\r\n            }\r\n        }\r\n        function drag(e) {\r\n            //計算彈出視窗的位置\r\n            targeter_parent.style.left = e.clientX - x + \"px\";\r\n            targeter_parent.style.top = e.clientY - y + \"px\";\r\n        }\r\n    },\r\n    _data: {}\r\n});\r\nexport default $export;\r\n","import popups from \"./popups\";\r\nconst $export = Object.assign(\r\n/**\r\n * @name 當設置被更新時，觸發事件\r\n * @param {string} key 設置的鍵\r\n * @param {any} value 設置的值\r\n**/\r\nfunction (key, done) {\r\n    const $this = $export;\r\n    $this._trigger.push({ [key]: done });\r\n}, {\r\n    /**\r\n     * @name 設置新的參數\r\n     * @argument {string} key 參數的名字\r\n     * @argument {any} value 參數的值\r\n     **/\r\n    set_config(key, value, el) {\r\n        const $this = $export;\r\n        //如果值相同，不做任何事\r\n        const config = $this._config;\r\n        if (config[key] === value) {\r\n            return;\r\n        }\r\n        config[key] = value;\r\n        //查看是否有事件觸發\r\n        const triggers = $this._trigger;\r\n        triggers.forEach(trigger => {\r\n            if (key in trigger) {\r\n                trigger[key](value, el);\r\n            }\r\n        });\r\n    },\r\n    _config: {},\r\n    _trigger: [],\r\n    //創建HTML設置清單\r\n    show_settings(config, show = true) {\r\n        let html = \"\";\r\n        for (const item of config) {\r\n            if (!Array.isArray(item)) {\r\n                html += make_html(item);\r\n            }\r\n            else {\r\n                html += `<div class=\"setting-group\">`;\r\n                for (const setting of item) {\r\n                    html += make_html(setting);\r\n                }\r\n                html += \"</div>\";\r\n            }\r\n        }\r\n        return { html: html, fun: (self) => {\r\n                let desc_el;\r\n                let is_hover = false;\r\n                self.addEventListener(\"mouseover\", function (e) {\r\n                    const targeter = e.target;\r\n                    if (!(targeter.tagName === \"H2\" || targeter.tagName === \"H1\")) {\r\n                        return;\r\n                    }\r\n                    desc_el = popups(\"setting_desc\", false, targeter.dataset.desc, false);\r\n                    desc_el.classList.add(\"delay_show\");\r\n                    is_hover = true;\r\n                });\r\n                self.addEventListener(\"mouseout\", function (e) {\r\n                    const targeter = e.target;\r\n                    if (!(targeter.tagName === \"H2\" || targeter.tagName === \"H1\")) {\r\n                        return;\r\n                    }\r\n                    desc_el.classList.remove(\"delay_show\");\r\n                    is_hover = false;\r\n                });\r\n                self.addEventListener(\"mousemove\", function (e) {\r\n                    if (!(is_hover && desc_el)) {\r\n                        return;\r\n                    }\r\n                    const style = desc_el.style;\r\n                    style.top = (e.pageY + 10) + \"px\";\r\n                    style.left = (e.pageX + 10) + \"px\";\r\n                });\r\n            } };\r\n        function make_html(item_config) {\r\n            //生成HTML\r\n            let $html = `<div class=\"setting-item\">`;\r\n            const type = item_config.type;\r\n            const title_tag = type === \"title\" ? \"h1\" : \"h2\";\r\n            $html += `<${title_tag} data-desc=\"${item_config.desc.replace(/\"/g, \"&quot;\")}\">${item_config.name}</${title_tag}>`;\r\n            if (type === \"more\") {\r\n                let sel_html = \"\";\r\n                for (const sel of item_config.more) {\r\n                    sel_html += \"<div></div>\";\r\n                }\r\n                $html += `<div class=\"setting-more\"></div><div></div>`;\r\n            }\r\n            else {\r\n                $html += (type === \"info\" || type === \"title\") ? \"\" : `<input data-id=\"${item_config.id}\" type=\"${type}\">`;\r\n            }\r\n            $html += `</div>`;\r\n            return $html;\r\n        }\r\n    }\r\n});\r\nexport default $export;\r\n","//這是設置面板的配置文件\r\nexport default [\r\n    [\r\n        {\r\n            \"id\": \"background\",\r\n            \"name\": \"背景\",\r\n            \"desc\": \"顯示的背景\",\r\n            \"type\": \"more\",\r\n            \"more\": [\r\n                {\r\n                    \"name\": \"顏色\",\r\n                    \"content\": /*html*/ `<input >`\r\n                },\r\n                {},\r\n                {}\r\n            ]\r\n        }\r\n    ]\r\n];\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import '../scss/main.scss';\r\nimport _core from './core';\r\nconst core = window[\"EY_core\"] = new _core();\r\nconst info = \"|window|\";\r\ncore.about();\r\nconsole.log(info + \"使用\\\"EY_core\\\"調用\\\"主核心\\\"\");\r\nimport config from './settings';\r\nconsole.log('使用\"open_settings()\"開啟設定列表');\r\nwindow[\"open_settings\"] = function (show = false) {\r\n    core.settings.show_settings(config, show);\r\n};\r\nwindow[\"wallpaperPropertyListener\"] = {\r\n    applyUserProperties: function (properties) {\r\n        if (properties.show_settings) {\r\n            const value = properties.show_settings.value;\r\n            core.settings.show_settings(config, value);\r\n        }\r\n    },\r\n};\r\n"],"names":[],"sourceRoot":""}